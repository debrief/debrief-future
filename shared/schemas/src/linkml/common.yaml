id: https://debrief.info/schemas/common
name: common
title: Debrief Common Types
description: >-
  Common types, enums, and base classes used across all Debrief schemas.

prefixes:
  linkml: https://w3id.org/linkml/
  debrief: https://debrief.info/schemas/

default_prefix: debrief
default_range: string

imports:
  - linkml:types

# ============================================================================
# Enums
# ============================================================================

enums:
  TrackTypeEnum:
    description: Type of track feature
    permissible_values:
      OWNSHIP:
        description: Own ship track
      CONTACT:
        description: Contact/target track
      REFERENCE:
        description: Reference track
      SOLUTION:
        description: Solution/analysis track

  SensorTypeEnum:
    description: Type of sensor that produced a contact
    permissible_values:
      SONAR_ACTIVE:
        description: Active sonar
      SONAR_PASSIVE:
        description: Passive sonar
      RADAR:
        description: Radar
      ESM:
        description: Electronic Support Measures
      VISUAL:
        description: Visual observation
      AIS:
        description: Automatic Identification System
      OTHER:
        description: Other sensor type

  LocationTypeEnum:
    description: Type of reference location
    permissible_values:
      WAYPOINT:
        description: Navigation waypoint
      EXERCISE_AREA:
        description: Exercise area boundary
      DANGER_AREA:
        description: Danger/exclusion zone
      ANCHORAGE:
        description: Anchorage location
      PORT:
        description: Port/harbor
      REFERENCE:
        description: Generic reference point

  ToolCategoryEnum:
    description: Category of analysis tool
    permissible_values:
      GEOMETRY:
        description: Geometric calculations
      KINEMATICS:
        description: Speed, course, bearing calculations
      TACTICAL:
        description: Tactical analysis
      EXPORT:
        description: Data export
      TRANSFORM:
        description: Data transformation

  SelectionContextEnum:
    description: Type of selection context required by a tool
    permissible_values:
      SINGLE_TRACK:
        description: Single track selected
      MULTIPLE_TRACKS:
        description: Multiple tracks selected
      TIME_PERIOD:
        description: Time period selected
      TRACK_SEGMENT:
        description: Track segment selected
      SENSOR_CONTACT:
        description: Sensor contact selected
      FEATURE_SET:
        description: Arbitrary feature set selected

# ============================================================================
# Types
# ============================================================================

types:
  Coordinate:
    typeof: float
    description: A geographic coordinate value (longitude or latitude in degrees)

  CSSColor:
    typeof: string
    description: A CSS color string (e.g., "#FF5733", "red", "rgb(255, 87, 51)")
    pattern: "^(#[0-9A-Fa-f]{3,8}|[a-zA-Z]+|rgb\\(.+\\)|rgba\\(.+\\)|hsl\\(.+\\)|hsla\\(.+\\))$"

# ============================================================================
# Base Classes
# ============================================================================

classes:
  TimestampedPosition:
    description: A position with timestamp and optional kinematic data
    attributes:
      time:
        description: Position timestamp (ISO8601)
        range: datetime
        required: true
      coordinates:
        description: "[longitude, latitude] in degrees"
        range: float
        multivalued: true
        required: true
        minimum_cardinality: 2
        maximum_cardinality: 2
      depth:
        description: Depth in meters (negative = below surface)
        range: float
      course:
        description: Course in degrees (0-360)
        range: float
        minimum_value: 0
        maximum_value: 360
      speed:
        description: Speed in knots
        range: float
        minimum_value: 0

  SourceFile:
    description: Metadata about a source file loaded into a plot
    attributes:
      filename:
        description: Original filename
        required: true
      format:
        description: File format (e.g., "REP", "CSV")
        required: true
      loaded_at:
        description: When file was loaded
        range: datetime
        required: true
      sha256:
        description: SHA256 hash of file contents
        required: true
        pattern: "^[a-f0-9]{64}$"
      asset_href:
        description: Path to asset in STAC catalog
        required: true
